(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{429:function(t,s,e){"use strict";e.r(s);var n=e(11),a=Object(n.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"permissions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#permissions"}},[t._v("#")]),t._v(" Permissions")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Developer Preview Software")]),t._v(" "),e("p",[t._v("Snaps is pre-release software. To try Snaps, install "),e("a",{attrs:{href:"https://metamask.io/flask",target:"_blank",rel:"noopener noreferrer"}},[t._v("MetaMask Flask"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Feature Requests")]),t._v(" "),e("p",[t._v("Do you have feature requests? Other ideas? We'd love to hear about them! "),e("a",{attrs:{href:"https://github.com/MetaMask/snaps-monorepo/discussions",target:"_blank",rel:"noopener noreferrer"}},[t._v("Click here"),e("OutboundLink")],1),t._v(" to join the discussion.")])]),t._v(" "),e("p",[t._v("To access certain powerful JavaScript globals or JSON-RPC methods, your snap will need to ask the user for permission. Snaps follow the "),e("a",{attrs:{href:"https://eips.ethereum.org/EIPS/eip-2255",target:"_blank",rel:"noopener noreferrer"}},[t._v("EIP-2255 wallet permissions specification"),e("OutboundLink")],1),t._v(", and your snap's required permissions must be specified in the "),e("code",[t._v("initialPermissions")]),t._v(" field of your "),e("RouterLink",{attrs:{to:"/guide/snaps-development-guide.html#the-snap-manifest"}},[e("code",[t._v("snap.manifest.json")]),t._v(" file")]),t._v(".")],1),t._v(" "),e("h2",{attrs:{id:"table-of-contents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table of Contents")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#table-of-contents"}},[t._v("Table of Contents")])]),e("li",[e("a",{attrs:{href:"#endowments"}},[t._v("Endowments")]),e("ul",[e("li",[e("a",{attrs:{href:"#endowment-rpc"}},[t._v("endowment:rpc")])]),e("li",[e("a",{attrs:{href:"#endowment-long-running"}},[t._v("endowment:long-running")])]),e("li",[e("a",{attrs:{href:"#endowment-network-access"}},[t._v("endowment:network-access")])]),e("li",[e("a",{attrs:{href:"#endowment-transaction-insight"}},[t._v("endowment:transaction-insight")])]),e("li",[e("a",{attrs:{href:"#endowment-cronjob"}},[t._v("endowment:cronjob")])])])]),e("li",[e("a",{attrs:{href:"#rpc-permissions"}},[t._v("RPC Permissions")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"endowments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowments"}},[t._v("#")]),t._v(" Endowments")]),t._v(" "),e("h3",{attrs:{id:"endowment-rpc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowment-rpc"}},[t._v("#")]),t._v(" "),e("code",[t._v("endowment:rpc")])]),t._v(" "),e("p",[t._v("For snaps that need to handle arbitrary JSON-RPC requests, the "),e("code",[t._v("rpc")]),t._v(" endowment is required. This permission grants a snap access to JSON-RPC requests sent to the snap, using the "),e("code",[t._v("onRpcRequest")]),t._v(" method. See "),e("RouterLink",{attrs:{to:"/guide/snaps-exports.html#onrpcrequest"}},[t._v("Exports")]),t._v(" for more information.")],1),t._v(" "),e("p",[t._v("This permission requires an object with a "),e("code",[t._v("snaps")]),t._v(" or "),e("code",[t._v("dapps")]),t._v(" property (or both), to signal if the snap can receive JSON-RPC requests from other snaps, or dapps, respectively. Both values default to "),e("code",[t._v("false")]),t._v(".")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"initialPermissions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endowment:rpc"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dapps"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"snaps"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"endowment-long-running"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowment-long-running"}},[t._v("#")]),t._v(" "),e("code",[t._v("endowment:long-running")])]),t._v(" "),e("p",[t._v("For snaps that are computationally heavy and can't finish execution within "),e("RouterLink",{attrs:{to:"/guide/snaps-development-guide.html#the-snap-lifecycle"}},[t._v("the snap lifecycle requirements")]),t._v(", the snap can request the "),e("code",[t._v("endowment:long-running")]),t._v(" permission.\nThis permission will effectively allow snaps to run indefinitely while processing RPC requests.")],1),t._v(" "),e("h3",{attrs:{id:"endowment-network-access"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowment-network-access"}},[t._v("#")]),t._v(" "),e("code",[t._v("endowment:network-access")])]),t._v(" "),e("p",[t._v("For snaps that need to access the internet, the snap can request the "),e("code",[t._v("endowment:network-access")]),t._v(" permission. This permission will expose the global networking APIs "),e("code",[t._v("fetch")]),t._v(" and "),e("code",[t._v("WebSocket")]),t._v(" to the snap execution environment. Without this permission, these globals will not be available.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Avoid XMLHttpRequest")]),t._v(" "),e("p",[e("code",[t._v("XMLHttpRequest")]),t._v(" is never available in snaps, and you should replace it with "),e("code",[t._v("fetch")]),t._v(". If your dependencies are using "),e("code",[t._v("XMLHttpRequest")]),t._v(", you can learn how to patch it away "),e("RouterLink",{attrs:{to:"/guide/snaps-patching-dependencies.html#patching-the-use-of-xmlhttprequest"}},[t._v("here")]),t._v(".")],1)]),t._v(" "),e("h3",{attrs:{id:"endowment-transaction-insight"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowment-transaction-insight"}},[t._v("#")]),t._v(" "),e("code",[t._v("endowment:transaction-insight")])]),t._v(" "),e("p",[t._v("For snaps that provide transaction insights, the snap can request the "),e("code",[t._v("endowment:transaction-insight")]),t._v(" permission. This permission grants a snap read-only access to raw transaction payloads, before they are accepted for signing by the user, by exporting the "),e("code",[t._v("onTransaction")]),t._v(" method. See "),e("RouterLink",{attrs:{to:"/guide/snaps-exports.html#ontransaction"}},[t._v("Exports")]),t._v(" for more information.")],1),t._v(" "),e("h3",{attrs:{id:"endowment-cronjob"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#endowment-cronjob"}},[t._v("#")]),t._v(" "),e("code",[t._v("endowment:cronjob")])]),t._v(" "),e("p",[t._v("For snaps that wants to run periodic actions for the user, the snap can request the "),e("code",[t._v("endowment:cronjob")]),t._v(" permission. This permission allows a snap to specify periodic requests that will trigger the exported "),e("code",[t._v("onCronjob")]),t._v(" method. see "),e("RouterLink",{attrs:{to:"/guide/snaps-exports.html#oncronjob"}},[t._v("Exports")]),t._v(".")],1),t._v(" "),e("p",[t._v("Cronjobs are specified as follows:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"initialPermissions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endowment:cronjob"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jobs"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expression"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minute"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hour"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dayOfMonth"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"month"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dayOfWeek"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exampleMethodOne"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"param1"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expression"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"* * * * *"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exampleMethodTwo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"param1"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"rpc-permissions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rpc-permissions"}},[t._v("#")]),t._v(" RPC Permissions")]),t._v(" "),e("p",[t._v("To use any restricted RPC method, a snap will need to request permissions to access that method. For a list of available RPC methods and thus valid RPC permissions see "),e("RouterLink",{attrs:{to:"/guide/snaps-rpc-api.html#restricted-methods"}},[t._v("JSON-RPC API")]),t._v(".")],1)])}),[],!1,null,null,null);s.default=a.exports}}]);